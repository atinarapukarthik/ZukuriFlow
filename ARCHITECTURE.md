# ZukuriFlow Elite - Architecture Diagram

## System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERACTION                            â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           FloatingButton (PyQt6 GUI)                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚  â”‚   IDLE    â”‚  â”‚ RECORDING â”‚  â”‚PROCESSING â”‚              â”‚   â”‚
â”‚  â”‚  â”‚ (Beige)   â”‚â†’ â”‚(Pulsing   â”‚â†’ â”‚ (Glowing  â”‚              â”‚   â”‚
â”‚  â”‚  â”‚           â”‚  â”‚   Red)    â”‚  â”‚   Gold)   â”‚              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚         â†‘              â”‚              â”‚                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚              â”‚              â”‚                         â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                          â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      AUDIO CAPTURE LAYER                 â”‚
        â”‚                                          â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚   AudioRecorder                    â”‚  â”‚
        â”‚  â”‚   â€¢ sounddevice (capture)          â”‚  â”‚
        â”‚  â”‚   â€¢ wavio (export)                 â”‚  â”‚
        â”‚  â”‚   â€¢ 16000Hz, mono, float32         â”‚  â”‚
        â”‚  â”‚                                    â”‚  â”‚
        â”‚  â”‚   StreamingRecorder                â”‚  â”‚
        â”‚  â”‚   â€¢ Manual start/stop              â”‚  â”‚
        â”‚  â”‚   â€¢ Buffer accumulation            â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    AI PROCESSING LAYER (QThread)         â”‚
        â”‚                                          â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚   WhisperEngine                    â”‚  â”‚
        â”‚  â”‚   â€¢ faster-whisper (base model)    â”‚  â”‚
        â”‚  â”‚   â€¢ int8 quantization              â”‚  â”‚
        â”‚  â”‚   â€¢ VAD filtering                  â”‚  â”‚
        â”‚  â”‚   â€¢ Technical initial_prompt       â”‚  â”‚
        â”‚  â”‚   â€¢ Keywords: Python, SQL, RAG,    â”‚  â”‚
        â”‚  â”‚     LangGraph, API, etc.           â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚                 â”‚                        â”‚
        â”‚                 â–¼                        â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚   TextRefiner                      â”‚  â”‚
        â”‚  â”‚   â€¢ Auto-capitalization            â”‚  â”‚
        â”‚  â”‚   â€¢ Smart punctuation              â”‚  â”‚
        â”‚  â”‚   â€¢ 100+ jargon mappings:          â”‚  â”‚
        â”‚  â”‚     - "rag" â†’ "RAG"                â”‚  â”‚
        â”‚  â”‚     - "python" â†’ "Python"          â”‚  â”‚
        â”‚  â”‚     - "sql" â†’ "SQL"                â”‚  â”‚
        â”‚  â”‚   â€¢ Contraction fixes              â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   OUTPUT & AUTOMATION LAYER              â”‚
        â”‚                                          â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚   ClipboardManager                 â”‚  â”‚
        â”‚  â”‚                                    â”‚  â”‚
        â”‚  â”‚   1. Save to history.json:         â”‚  â”‚
        â”‚  â”‚      {                             â”‚  â”‚
        â”‚  â”‚        timestamp,                  â”‚  â”‚
        â”‚  â”‚        transcription,              â”‚  â”‚
        â”‚  â”‚        refined,                    â”‚  â”‚
        â”‚  â”‚        metadata                    â”‚  â”‚
        â”‚  â”‚      }                             â”‚  â”‚
        â”‚  â”‚                                    â”‚  â”‚
        â”‚  â”‚   2. Copy to clipboard (pyperclip) â”‚  â”‚
        â”‚  â”‚                                    â”‚  â”‚
        â”‚  â”‚   3. Auto-paste (pyautogui):       â”‚  â”‚
        â”‚  â”‚      â€¢ Windows/Linux: Ctrl+V       â”‚  â”‚
        â”‚  â”‚      â€¢ macOS: Cmd+V                â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  ACTIVE WINDOW  â”‚
                 â”‚  (Text Pasted)  â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
1. USER CLICKS â†’ Start Recording
   â””â”€> FloatingButton: idle â†’ recording (pulsing red)
   â””â”€> AudioRecorder.StreamingRecorder.start()

2. USER SPEAKS
   â””â”€> Microphone â†’ sounddevice â†’ audio frames buffer

3. USER CLICKS â†’ Stop Recording
   â””â”€> FloatingButton: recording â†’ processing (glowing gold)
   â””â”€> AudioRecorder.StreamingRecorder.stop() â†’ numpy array
   â””â”€> Spawn TranscriptionWorker (QThread)

4. BACKGROUND PROCESSING
   â””â”€> WhisperEngine.transcribe(audio_data, use_vad=True)
       â”œâ”€> VAD filters silence
       â”œâ”€> faster-whisper decodes with technical prompt
       â””â”€> Returns: "need to implement rag for the api"

   â””â”€> TextRefiner.refine(transcription)
       â”œâ”€> Apply jargon: "Need to implement RAG for the API."
       â”œâ”€> Capitalize: "Need to implement RAG for the API."
       â””â”€> Add period: "Need to implement RAG for the API."

5. OUTPUT & PASTE
   â””â”€> ClipboardManager.copy_and_paste()
       â”œâ”€> Save to output/history.json
       â”œâ”€> pyperclip.copy("Need to implement RAG for the API.")
       â””â”€> pyautogui.hotkey('ctrl', 'v')  # Auto-paste

6. COMPLETION
   â””â”€> FloatingButton: processing â†’ idle (beige)
   â””â”€> Ready for next recording
```

## Module Dependencies

```
zukuriflow_elite.py
    â”œâ”€â”€ PyQt6 (GUI)
    â”‚   â”œâ”€â”€ QWidget (base class)
    â”‚   â”œâ”€â”€ QThread (background processing)
    â”‚   â””â”€â”€ QPainter (custom rendering)
    â”‚
    â”œâ”€â”€ utils.whisper_engine
    â”‚   â””â”€â”€ faster-whisper
    â”‚       â””â”€â”€ torch
    â”‚
    â”œâ”€â”€ utils.audio_recorder
    â”‚   â”œâ”€â”€ sounddevice
    â”‚   â”œâ”€â”€ wavio
    â”‚   â””â”€â”€ numpy
    â”‚
    â”œâ”€â”€ utils.text_refiner
    â”‚   â””â”€â”€ re (regex)
    â”‚
    â””â”€â”€ utils.clipboard_manager
        â”œâ”€â”€ pyperclip
        â”œâ”€â”€ pyautogui
        â””â”€â”€ json
```

## State Machine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IDLE   â”‚ (Beige, ğŸ¤)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ Click
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚RECORDING â”‚ (Pulsing Red, âº)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ Click
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚PROCESSINGâ”‚ (Glowing Gold, âš¡)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ Transcription Complete
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IDLE   â”‚ (Beige, ğŸ¤)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Characteristics

| Component        | Operation           | Time (approx)  |
|------------------|---------------------|----------------|
| AudioRecorder    | Start streaming     | < 50ms         |
| AudioRecorder    | Stop + buffer       | < 100ms        |
| WhisperEngine    | Transcribe (5s audio)| 2-3s (CPU)     |
| WhisperEngine    | Transcribe (5s audio)| 0.5-1s (GPU)   |
| TextRefiner      | Refine text         | < 10ms         |
| ClipboardManager | Save + paste        | < 50ms         |
| **TOTAL**        | **5s audio â†’ paste** | **~3-4s (CPU)**|

## Thread Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MAIN THREAD (Qt Event Loop)           â”‚
â”‚                                               â”‚
â”‚  â€¢ FloatingButton rendering                   â”‚
â”‚  â€¢ User input handling (clicks, drags)        â”‚
â”‚  â€¢ Animation timers (pulse, glow)             â”‚
â”‚  â€¢ Signal/slot connections                    â”‚
â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ Spawns
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      BACKGROUND THREAD (QThread)              â”‚
â”‚                                               â”‚
â”‚  TranscriptionWorker:                         â”‚
â”‚    1. WhisperEngine.transcribe()              â”‚
â”‚    2. TextRefiner.refine()                    â”‚
â”‚                                               â”‚
â”‚  Signals:                                     â”‚
â”‚    â€¢ finished(transcription, refined)         â”‚
â”‚    â€¢ error(message)                           â”‚
â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Built with â¤ï¸ by Senior Python Engineers**
**For Technical Professionals Who Value Precision**
